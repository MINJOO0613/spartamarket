{% extends "base.html" %}
<p>팔로워: {{ user.profile.follower_set.count }}</p>
<p>팔로잉: {{ user.profile.following_set.count }}</p>
{% block content %}
<div class="bg-white">

  <div class="container">
    <div class="d-flex justify-content-between align-items-center py-4">
      <div>
        <a href="#" class="d-inline-block text-dark">
          <strong>{{ user.profile.follower_set.count }}</strong>
          <span class="text-muted">followers</span>
        </a>
        <a href="#" class="d-inline-block text-dark ml-3">
          <strong>{{ user.profile.following_set.count }}</strong>
          <span class="text-muted">following</span>
        </a>
      </div>
      <div>
        {% if request.user.profile != user.profile %}
          {% if is_following %}
            <form action="{% url 'users:unfollow_user' user.username %}" method="post">
            {% csrf_token %}
            <button type="submit" class="btn btn-success btn-sm">Unfollow</button>
            </form>
          {% else %}
            <form action="{% url 'users:follow_user' user.username %}" method="post">
            {% csrf_token %}
            <button type="submit" class="btn btn-success btn-sm">Follow</button>
            </form>
          {% endif %}
        {% else %}
          <a href="{% url 'users:edit_profile' user.username %}">편집하기</a>
        {% endif %}
        </a>
        <a href="#" class="btn btn-default icon-btn md-btn-flat btn-sm ml-1">
          <i class="ion ion-md-mail"></i>
        </a>
      </div>
    </div>
  </div>
  <hr class="m-0">

  <div class="container">
    <div class="text-center py-5">
      {% if user.profile.profile_image %}
      <img src="{{ user.profile.profile_image.url }}" alt="profile-image" height="200" class="rounded-circle"style="width:200px;">
      {% else %}
      <img src="https://teamsparta.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F83c75a39-3aba-4ba4-a792-7aefe4b07895%2F91b523d3-e116-4d12-a8c9-401ea4b12c4a%2Fuser.png?table=block&id=7d771e5a-5901-42b4-9532-f42f6bf86e5d&spaceId=83c75a39-3aba-4ba4-a792-7aefe4b07895&width=260&userId=&cache=v2"
      alt="profile-image" height="200" class="rounded-circle" style="width:200px;">
      {% endif %}

      <div class="col-md-8 col-lg-6 col-xl-5 p-0 mx-auto">
        <h4 class="font-weight-bold my-4">{{ user.username }}</h4>

        <div class="text-muted mb-4">
          <p>{{ user.email }}</p><br>
          <p><strong>닉네임:</strong> {{ user.profile.nickname }}</p><br><br>
          <p><strong>소개:</strong><br><br> {{ user.profile.description }}</p>
        </div>
      </div>

      <div class="text-center">
        <a href="#" class="btn icon-btn borderless btn-outline-twitter btn-lg btn-round">
          <span class="ion ion-logo-twitter"></span>
        </a>
        <a href="#" class="btn icon-btn borderless btn-outline-facebook btn-lg btn-round">
          <span class="ion ion-logo-facebook"></span>
        </a>
        <a href="#" class="btn icon-btn borderless btn-outline-instagram btn-lg btn-round">
          <span class="ion ion-logo-instagram"></span>
        </a>
      </div>
    </div>
  </div>
  <hr class="m-0">

  <ul class="nav nav-tabs tabs-alt justify-content-center">
    <li class="nav-item">
      <a class="nav-link py-4 active" href="#">Posts</a>
    </li>
    <li class="nav-item">
      <a class="nav-link py-4 " href="#">Likes</a>
    </li>
    <li class="nav-item">
      <a class="nav-link py-4" href="#">Followers</a>
    </li>
    <li class="nav-item">
      <a class="nav-link py-4" href="#">Following</a>
    </li>
  </ul>

</div>

{% comment %} <br><br><br><br><br><br><br><br>
  {% if request.user.profile == user.profile %}
    <a href="{% url 'users:edit_profile' user.username %}">편집하기</a>
  {% endif %} {% endcomment %}

{% comment %} <br><br><br>
{% if user.profile.profile_image %}
  <img src="{{ user.profile.profile_image.url }}" alt="프로필 이미지">
{% endif %}
  <br><br>
  <h1>{{ user.username }}의 프로필</h1><br>
  <p>이메일: {{ user.email }}</p>
  <p>소개: {{ user.profile.description }}</p>
  <p>닉네임: {{ user.profile.nickname }}</p><br><br>

  <p>팔로워: {{ user.profile.follower_set.count }}</p>
  <p>팔로잉: {{ user.profile.following_set.count }}</p>

  <br><br>
  {% if request.user.profile != user.profile %}
    {% if is_following %}
      <form action="{% url 'users:unfollow_user' user.username %}" method="post">
        {% csrf_token %}
        <button type="submit">언팔로우</button>
      </form>
    {% else %}
      <form action="{% url 'users:follow_user' user.username %}" method="post">
        {% csrf_token %}
        <button type="submit">팔로우</button>
      </form>
    {% endif %}
  {% endif %} {% endcomment %}



{% endblock %}